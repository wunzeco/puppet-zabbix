# captures statistics from backup compress and upload scripts
UserParameter=custom.backups.atmos.transfer.bytes[*],egrep -A8 'Uploading to Atmos.*-$1-.*' /var/log/backups-upload.log | egrep -o '^Transferred \S+ bytes in' | tail -n 1 | cut -f2 -d' ' | tr -d ,
UserParameter=custom.backups.atmos.transferred.time[*],egrep -A8 'Uploading to Atmos.*-$1-.*' /var/log/backups-upload.log | egrep -o '^Transferred \S+ bytes in \S+ second' | tail -n 1 | cut -f5 -d' ' | tr -d ,
UserParameter=custom.backups.atmos.files.failed[*],egrep -A8 'Uploading to Atmos.*-$1-.*' /var/log/backups-upload.log | egrep '^Successful Files' | tail -n 1 | cut -f7 -d' '
UserParameter=custom.backups.atmos.files.succeeded[*],egrep -A8 'Uploading to Atmos.*-$1-.*' /var/log/backups-upload.log | egrep '^Successful Files' | tail -n 1 | cut -f3 -d' '
UserParameter=custom.backups.compress.ratio[*],sed -ne '/Compressing .*-$1-.*/,/Compression Ratio:/p' /var/log/backups-compress.log | grep -Po 'Compression Ratio: (\d+\.\d{2})' | cut -f3 -d' ' | tail -n1
UserParameter=custom.backups.compress.time[*],sed -ne '/Compressing .*-$1-.*/,/Total time:/p' /var/log/backups-compress.log | grep 'Total time:' | grep -Po '\d\d:\d\d:\d\d' | tail -n1 | perl -ane '@t=reverse split(/[:-]/,$F[0]); $s=$t[0]+$t[1]*60+$t[2]*3600+$t[3]*86400; print "$s\n"'
